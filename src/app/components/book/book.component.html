<input type="text" #newBook><br>
<button type="button" (click)="getBooks()">Wyswietl wszystkie ksiazki</button>

<form #bookForm="ngForm">
  <hr/>
  <div ngModelGroup="author" hidden="hidden">
    <div class="form-group">
      <label>Author first name</label>
      <input type="text" name="firstName" [(ngModel)]="authorModel.firstName">
    </div>

    <div class="form-group">
      <label>Author second name</label>
      <input type="text" name="secondName" [(ngModel)]="authorModel.secondName">
    </div>

    <div class="form-group">
      <label>Author last name</label>
      <input type="text" name="lastName" [(ngModel)]="authorModel.lastName">
    </div>

    <div class="form-group">
      <label>Author bibliography</label>
      <textarea name="bibliography" [(ngModel)]="authorModel.bibliography" cols="40" rows="5"></textarea>
    </div>

  </div>

  <div class="form-group">
    <label>Book name</label>
    <input type="text" required="required" class="form-control" #name="ngModel" pattern="[a-zA-Z ]*" minlength="5"
           maxlength="50"
           [class.is-invalid]="name.touched && name.invalid"
           [class.is-valid]="name.valid && name.touched"
           name="name" [(ngModel)]="bookModel.name">
    <small class="text-danger" [class.d-none]="name.valid || name.untouched">Book name is required</small><br>
    <small class="text-danger" [class.d-none]="name.valid || name.untouched">Book name is required</small>
  </div>

  <div class="form-group">
    <select class="custom-select" #bookGenre="ngModel"
            [class.is-invalid]="bookGenre.touched && !genres.includes(bookGenre.value)"
            [class.is-valid]="bookGenre.touched && genres.includes(bookGenre.value)"
            name="bookGenre" [(ngModel)]="bookModel.bookGenre">
      <option>Choose the genre</option>
      <option *ngFor="let genre of genres">
        {{genre}}
      </option>
    </select>
    <small>Book genre is required</small>
  </div>

  <div class="formGroup">
    <label>Book date release</label>
    <input type="date" class="form-control" #releaseDate="ngModel" required="required"
           [class.is-invalid]="releaseDate.invalid && releaseDate.touched"
           [class.is-valid]="releaseDate.valid && releaseDate.touched"
           name="releaseDate" [(ngModel)]="bookModel.releaseDate">
    <small>Book genre is required</small>
  </div>

  <div class="form-group">
    <select class="custom-select" name="author" [(ngModel)]="bookModel.author">
      <option value="">Choose the author</option>
      <option *ngFor="let book of books">
        {{book.author.firstName}}
      </option>
    </select>
    <small>Author is required</small>
  </div>

</form>
